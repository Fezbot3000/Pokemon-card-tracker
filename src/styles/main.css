@tailwind base;
@tailwind components;
@tailwind utilities;

@import './shared.css';

/* Material Icons */
@layer base {
  .material-icons {
    font-family: 'Material Icons';
    font-weight: normal;
    font-style: normal;
    font-size: 24px;
    line-height: 1;
    letter-spacing: normal;
    text-transform: none;
    display: inline-block;
    white-space: nowrap;
    word-wrap: normal;
    direction: ltr;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-feature-settings: 'liga';
  }

  /* Default light theme */
  body {
    @apply bg-white text-gray-900;
  }

  /* Dark theme */
  html.dark body {
    @apply bg-[#0B0F19] text-white;
  }

  /* Ensure proper font loading */
  @font-face {
    font-family: 'Material Icons';
    font-style: normal;
    font-weight: 400;
    src: url(https://fonts.gstatic.com/s/materialicons/v140/flUhRq6tzZclQEJ-Vdg-IuiaDsNc.woff2) format('woff2');
  }
}

/* Custom styles that are specific to this app */
:root {
  --primary: #4318FF;
  --error: #FF3B3B;
  --success: #05CD99;
}

/* App-specific components */
@layer components {
  /* Header Styles */
  .app-header {
    @apply sticky top-0 z-50 bg-white dark:bg-[#0B0F19] border-b border-gray-200 dark:border-gray-700/50;
  }

  .header-content {
    @apply flex items-center justify-between py-3 px-4 lg:px-6 relative;
  }

  .header-left {
    @apply flex items-center flex-shrink-0;
  }

  .header-center {
    @apply hidden lg:flex items-center gap-2 xl:gap-3 justify-center flex-grow px-4;
  }

  .header-right {
    @apply hidden lg:flex items-center gap-2 xl:gap-3;
  }

  /* Header Buttons */
  .header-buttons {
    @apply hidden sm:flex items-center gap-3 ml-auto;
  }

  .header-buttons .btn {
    @apply min-w-[40px] h-[40px] flex items-center justify-center;
  }

  /* Button Styles */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-4 py-2
           rounded-xl font-medium transition-colors text-sm whitespace-nowrap;
  }

  .btn span.material-icons {
    @apply inline-block text-xl flex-shrink-0;
  }

  /* Only show text on desktop */
  .btn span:not(.material-icons) {
    @apply hidden xl:inline;
  }

  /* Mobile menu */
  .mobile-menu {
    @apply fixed inset-x-0 top-[64px] bg-white dark:bg-[#1B2131] 
           border-t border-gray-200 dark:border-gray-700/50
           shadow-lg z-50;
  }

  .mobile-menu-header {
    @apply flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700/50;
  }

  .mobile-menu-content {
    @apply p-6 space-y-4;
  }

  .mobile-menu-item {
    @apply flex items-center gap-3 w-full px-4 py-3
           text-gray-700 dark:text-gray-200
           hover:bg-gray-50 dark:hover:bg-[#252B3B]
           transition-colors;
  }

  .mobile-menu-item .material-icons {
    @apply text-gray-500 dark:text-gray-400;
  }

  /* Mobile menu button */
  .mobile-menu-button {
    @apply block sm:hidden ml-4 p-2;
  }

  .mobile-menu-button .material-icons {
    @apply inline-block text-xl;
  }

  /* Total Cards Counter */
  .total-cards-counter {
    @apply flex items-center gap-2 border-b border-gray-200 dark:border-gray-700/50 px-6 py-2;
  }
  
  .total-cards-icon {
    @apply text-gray-600 dark:text-gray-400;
  }
  
  .total-cards-text {
    @apply text-gray-700 dark:text-gray-200 font-medium text-base;
  }

  /* Collection Selector */
  .collection-selector {
    @apply flex items-center gap-2 relative max-w-[200px];
  }

  .collection-selector .material-icons {
    @apply inline-block flex-shrink-0;
  }

  .collection-name {
    @apply flex items-center gap-1.5 xl:gap-2 text-gray-900 dark:text-white font-medium 
           hover:bg-gray-100 dark:hover:bg-[#252B3B] px-2 xl:px-3 py-2 rounded-xl transition-colors
           truncate;
  }

  .collection-name span:not(.material-icons) {
    @apply truncate;
  }

  .collection-lock {
    @apply text-primary text-2xl;
  }

  /* Collection Dropdown */
  .collection-dropdown {
    @apply absolute top-full left-0 mt-2 w-64 
           bg-white dark:bg-[#1B2131] rounded-xl shadow-lg 
           border border-gray-200 dark:border-gray-700/50 py-2 z-50;
  }

  .collection-item {
    @apply flex items-center justify-between px-4 py-2 
           hover:bg-gray-50 dark:hover:bg-[#252B3B] cursor-pointer 
           text-gray-900 dark:text-gray-200;
  }

  .collection-item.text-primary {
    @apply text-[#4318FF];
  }

  .collection-divider {
    @apply h-px bg-gray-200 dark:bg-gray-700/50 my-1 mx-4;
  }

  /* Button Styles */
  .btn-primary {
    @apply bg-primary text-white hover:bg-primary/90;
  }

  .btn-secondary {
    @apply bg-gray-100 dark:bg-[#1B2131] text-gray-900 dark:text-white 
           hover:bg-gray-200 dark:hover:bg-[#252B3B] 
           border border-gray-200 dark:border-gray-700/50;
  }

  .btn-danger {
    @apply bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400 
           hover:bg-red-200 dark:hover:bg-red-900/30 
           border border-red-200 dark:border-red-900/30;
  }

  /* Delete button */
  .delete-button {
    @apply w-full px-4 py-3 rounded-xl
           bg-red-600 dark:bg-red-800
           text-white font-medium
           hover:bg-red-700 dark:hover:bg-red-700
           transition-colors flex items-center justify-center;
  }

  /* Stats Section */
  .stats-section {
    @apply grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 xl:gap-4 px-4 xl:px-6 py-3;
  }

  .stat-card {
    @apply p-4 rounded-xl bg-white dark:bg-[#1B2131] 
           border border-gray-200 dark:border-gray-700/50
           transition-all duration-200;
  }

  .stat-label {
    @apply text-sm uppercase tracking-wide text-gray-500 dark:text-gray-400 mb-2;
  }

  .stat-value {
    @apply text-2xl font-medium text-gray-900 dark:text-white;
  }

  .profit-value {
    @apply text-[#05CD99];
  }

  .loss-value {
    @apply text-red-500;
  }

  /* Search and Filter Section */
  .search-input {
    @apply w-full px-4 py-2.5 
           bg-white dark:bg-[#1B2131] 
           border border-gray-200 dark:border-gray-700/50 
           rounded-xl text-gray-900 dark:text-gray-100 
           placeholder-gray-500 dark:placeholder-gray-400
           focus:ring-2 focus:ring-primary/20 focus:border-primary 
           transition-colors;
  }

  .filter-section {
    @apply flex flex-col gap-1.5 px-4 xl:px-6 py-2;
  }

  /* Sort and View Controls */
  .controls-container {
    @apply flex flex-col gap-2 w-full mt-1;
  }

  .sort-container, .view-container {
    @apply relative flex-1;
  }

  .controls-right {
    @apply flex items-center gap-2 sm:ml-auto mt-2 sm:mt-0 justify-end;
  }

  .sort-button, .view-button {
    @apply flex items-center justify-between w-full px-4 py-2.5 rounded-xl 
           bg-white dark:bg-[#1B2131] 
           border border-gray-200 dark:border-gray-700/50
           text-gray-900 dark:text-white text-sm
           hover:bg-gray-50 dark:hover:bg-[#252B3B] transition-colors;
  }

  .sort-button > div, .view-button > div {
    @apply flex items-center gap-2;
  }

  .sort-button .material-icons, 
  .view-button .material-icons {
    @apply text-gray-500 dark:text-gray-400;
  }

  .sort-dropdown, .view-dropdown {
    @apply absolute top-full left-0 right-0 mt-2 w-full
           bg-white dark:bg-[#1B2131] rounded-xl shadow-lg 
           border border-gray-200 dark:border-gray-700/50 
           py-2 z-50;
  }

  .sort-option {
    @apply flex items-center gap-2 px-4 py-2
           text-gray-900 dark:text-white text-sm
           hover:bg-gray-50 dark:hover:bg-[#252B3B] cursor-pointer;
  }

  .sort-option .material-icons {
    @apply text-primary;
  }

  .sort-option.active {
    @apply bg-gray-50 dark:bg-[#252B3B];
  }

  /* Column Headers */
  .column-headers {
    @apply flex items-center gap-6 px-6 py-3 
           text-sm font-medium text-gray-400;
  }

  .column-header {
    @apply flex items-center gap-1.5 cursor-pointer hover:text-white transition-colors;
  }

  .column-header.active {
    @apply text-white;
  }

  /* Card Grid */
  .card-grid {
    @apply grid grid-cols-1 sm:grid-cols-4 
           gap-3 xl:gap-4 px-4 xl:px-6 mt-3;
  }

  /* Card Styles */
  .card {
    @apply bg-white dark:bg-[#1B2131] rounded-xl 
           border border-gray-200 dark:border-gray-700/50 
           overflow-hidden transition-all duration-200
           hover:bg-gray-50 dark:hover:bg-[#252B3B]
           w-full;
  }

  .card-image {
    @apply aspect-[2/3] relative overflow-hidden;
  }

  .card-image img {
    @apply w-full h-full object-cover;
  }

  .card-content {
    @apply p-4;
  }

  /* Filter Section */
  .filter-section {
    @apply px-6 py-4 space-y-4;
  }

  .dropdown-button {
    @apply btn-secondary flex items-center justify-between w-48;
  }

  .dropdown-icon {
    @apply material-icons text-lg ml-2;
  }

  /* Card Styles */
  .card-light {
    @apply card bg-white border-gray-200 hover:bg-gray-50;
  }

  .card-dark {
    @apply card bg-[#1B2131] border-gray-700/50 hover:bg-[#252B3B];
  }

  /* Modal Styles */
  .modal {
    @apply fixed inset-0 z-50 flex items-center justify-center bg-black/50;
  }

  .modal-content {
    @apply bg-white dark:bg-[#1B2131] rounded-xl w-full max-w-md mx-4 overflow-hidden;
  }

  .modal-header {
    @apply flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700/50;
  }

  .modal-title {
    @apply text-xl font-medium text-gray-800 dark:text-gray-200;
  }

  .modal-close {
    @apply text-2xl text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300;
  }

  .modal-body {
    @apply p-6;
  }

  .modal-label {
    @apply block text-gray-700 dark:text-gray-300 mb-2;
  }

  .modal-input {
    @apply w-full px-4 py-2 rounded-xl 
           border border-gray-200 dark:border-gray-700/50 
           bg-white dark:bg-[#252B3B]
           text-gray-900 dark:text-white
           focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary
           placeholder-gray-500 dark:placeholder-gray-400;
  }

  .modal-footer {
    @apply flex justify-end gap-2 mt-6;
  }

  .modal-btn-cancel {
    @apply px-4 py-2 rounded-lg
           bg-gray-100 dark:bg-[#252B3B] 
           text-gray-700 dark:text-gray-300
           hover:bg-gray-200 dark:hover:bg-[#323B4B]
           transition-colors;
  }

  .modal-btn-create {
    @apply px-4 py-2 rounded-lg
           bg-primary text-white
           hover:bg-primary/90
           transition-colors;
  }

  /* Dropdown Styles */
  .dropdown {
    @apply absolute right-0 mt-2 w-48 rounded-xl shadow-lg;
  }

  .dropdown-item {
    @apply flex items-center px-4 py-2 text-sm cursor-pointer transition-all duration-200;
  }

  /* Collection Styles */
  .collection-header {
    @apply sticky top-0 z-40 bg-white dark:bg-[#0B0F19] border-b border-gray-200 dark:border-gray-700/50;
  }

  .collection-title {
    @apply text-lg font-medium text-gray-800 dark:text-gray-200 select-none;
  }

  /* Card specific styles */
  .card-image-container {
    @apply aspect-[2/3] mb-4 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800;
  }

  .card-stats {
    @apply grid grid-cols-2 gap-4 mb-6;
  }

  .card-stat {
    @apply p-4 rounded-xl bg-white dark:bg-[#1B2131] border border-gray-200 dark:border-gray-700/50;
  }

  .card-stat-label {
    @apply text-sm text-gray-600 dark:text-gray-400 mb-1;
  }

  .card-stat-value {
    @apply text-lg font-medium text-gray-900 dark:text-white;
  }

  /* Form specific styles */
  .form-group {
    @apply mb-4;
  }

  .form-label {
    @apply block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1;
  }

  .form-hint {
    @apply mt-1 text-xs text-gray-500 dark:text-gray-400;
  }

  /* Loading states */
  .loading-overlay {
    @apply fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50;
  }

  .loading-spinner {
    @apply animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent;
  }

  /* Loading States */
  .skeleton {
    @apply animate-pulse bg-gray-200 dark:bg-gray-700 rounded;
  }

  /* Toast Notifications */
  .toast {
    @apply fixed top-4 right-4 z-[100] px-6 py-3 rounded-lg shadow-lg;
  }

  .toast-success {
    @apply toast bg-green-500 text-white;
  }

  .toast-error {
    @apply toast bg-red-500 text-white;
  }

  /* Grid Layouts */
  .summary-grid {
    @apply grid grid-cols-1 md:grid-cols-3 gap-6;
  }

  /* Typography */
  .heading-1 {
    @apply text-2xl font-semibold text-gray-900 dark:text-white;
  }

  .heading-2 {
    @apply text-xl font-medium text-gray-800 dark:text-gray-200;
  }

  .text-body {
    @apply text-sm text-gray-600 dark:text-gray-400;
  }

  /* Icons */
  .icon {
    @apply text-xl;
  }

  .icon-sm {
    @apply text-base;
  }

  .icon-lg {
    @apply text-2xl;
  }

  /* Input styles */
  .input {
    @apply w-full px-3 py-2 bg-white dark:bg-[#1B2131] border border-gray-300 dark:border-gray-700 rounded-lg text-gray-900 dark:text-gray-100;
  }

  .input:disabled {
    @apply bg-transparent border-transparent text-gray-700 dark:text-gray-300 cursor-default;
  }

  .input:not(:disabled) {
    @apply bg-white dark:bg-[#1B2131] border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-primary/20 focus:border-primary dark:focus:border-primary transition-colors;
  }

  /* Make number inputs look consistent */
  .input[type="number"],
  .search-input[type="number"] {
    @apply [appearance:textfield];
  }

  .input[type="number"]::-webkit-outer-spin-button,
  .input[type="number"]::-webkit-inner-spin-button,
  .search-input[type="number"]::-webkit-outer-spin-button,
  .search-input[type="number"]::-webkit-inner-spin-button {
    @apply appearance-none;
    margin: 0;
  }

  /* Responsive padding for main content */
  .app-content {
    @apply px-4 sm:px-6;
  }

  /* Ensure dropdowns don't overflow on mobile */
  .sort-dropdown,
  .view-dropdown,
  .collection-dropdown {
    @apply max-h-[80vh] overflow-y-auto;
    max-width: calc(100vw - 2rem);
  }

  @screen sm {
    .controls-container {
      @apply flex-row items-center;
    }

    .sort-container, .view-container {
      @apply flex-1 basis-[calc(50%-80px)];
    }

    .delete-button {
      @apply w-[160px];
    }

    /* Tablet view: Show icons, hide text */
    .btn span.material-icons {
      @apply inline-block;
    }
    
    .btn span:not(.material-icons) {
      @apply hidden;
    }
    
    /* Hide burger menu on tablet and above */
    .mobile-menu-button {
      @apply hidden;
    }
  }

  @screen lg {
    .sort-container, .view-container {
      @apply max-w-[280px];
    }
  }

  @screen xl {
    /* Desktop view: Show icons and text */
    .btn span:not(.material-icons) {
      @apply inline;
    }
  }

  /* Ensure main content doesn't scroll when mobile menu is open */
  .mobile-menu-open {
    @apply overflow-hidden;
  }

  .sort-option-divider {
    height: 1px;
    margin: 8px 0;
    background-color: rgb(229 231 235);
  }

  .dark .sort-option-divider {
    background-color: rgb(75 85 99);
  }

  /* Profit Change Modal */
  .profit-change-modal {
    @apply fixed inset-0 z-50 flex items-center justify-center bg-black/50;
  }

  .profit-change-content {
    @apply bg-white dark:bg-[#1B2131] rounded-xl w-full max-w-md mx-4 p-6;
  }

  .profit-change-header {
    @apply text-xl font-medium text-gray-800 dark:text-gray-200 mb-4;
  }

  .profit-change-body {
    @apply space-y-4;
  }

  .profit-stat {
    @apply flex flex-col p-4 rounded-xl
           bg-gray-50 dark:bg-[#252B3B]
           border border-gray-200 dark:border-gray-700/50;
  }

  .profit-label {
    @apply text-sm text-gray-600 dark:text-gray-400;
  }

  .profit-value {
    @apply text-xl font-medium mt-1;
  }

  .profit-value.positive {
    @apply text-[#05CD99];
  }

  .profit-value.negative {
    @apply text-red-500;
  }

  .profit-change-footer {
    @apply flex justify-end mt-6;
  }

  .profit-change-close {
    @apply btn btn-primary px-6;
  }
}

@layer utilities {
  /* Transitions */
  .fade-enter {
    opacity: 0;
  }

  .fade-enter-active {
    opacity: 1;
    transition: opacity 200ms ease-in;
  }

  .fade-exit {
    opacity: 1;
  }

  .fade-exit-active {
    opacity: 0;
    transition: opacity 200ms ease-in;
  }
}

/* Print styles */
@media print {
  .no-print {
    display: none;
  }
  
  .print-only {
    display: block;
  }
  
  body {
    background: white;
  }
}

/* Dark mode overrides */
html.dark {
  color-scheme: dark;
}