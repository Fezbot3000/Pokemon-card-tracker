/**
 * Z-Index hierarchy management
 * 
 * This file manages z-index layering throughout the application
 * using proper CSS specificity instead of !important flags.
 */

/* Define a specific z-index scale for consistency */
:root {
  --z-index-base: 1;
  --z-index-dropdown: 100;
  --z-index-sticky: 200;
  --z-index-fixed: 300;
  --z-index-modal-backdrop: 400;
  --z-index-modal: 500;
  --z-index-popover: 600;
  --z-index-tooltip: 700;
  --z-index-header: 2500;
  --z-index-settings: 2000;
  --z-index-bottom-nav: 3000;
}

/* Mobile-specific z-index management */
@media (max-width: 768px) {
  /* Bottom nav should be above everything */
  body .bottom-nav,
  html body .bottom-nav,
  #root .bottom-nav {
    z-index: var(--z-index-bottom-nav);
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
  }
  
  /* Settings page should be below the bottom nav but above other content */
  body .settings-mobile-page,
  html body .settings-mobile-page,
  #root .settings-mobile-page {
    z-index: var(--z-index-settings);
  }
  
  /* Header should be above settings */
  body .header, 
  body .app-header, 
  body .collection-header,
  html body .header, 
  html body .app-header, 
  html body .collection-header,
  #root .header, 
  #root .app-header, 
  #root .collection-header {
    z-index: var(--z-index-header);
  }
}

/* Full-page settings styling on mobile */
body .settings-mobile-page,
html body .settings-mobile-page {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  max-width: 100%;
  height: 100vh;
  min-height: 100%;
  max-height: 100vh;
  transform: none;
  background-color: #f3f4f6; /* light mode background */
  z-index: var(--z-index-settings);
  border-radius: 0;
  border: none;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  margin: 0;
  padding: 0;
}

/* Dark mode settings background */
html.dark body .settings-mobile-page {
  background-color: #111827; /* dark mode background */
}

/* Adjust spacing for mobile settings content */
@media (max-width: 768px) {
  .mobile-settings-scrollable {
    padding-top: 0;
    padding-bottom: 100px;
    -webkit-overflow-scrolling: touch;
    margin-bottom: 0;
    height: auto;
    overflow-y: visible;
  }
  
  .settings-mobile-page {
    padding-bottom: 64px;
    margin-bottom: 0;
  }
  
  /* Force bottom nav to always be visible */
  .bottom-nav {
    display: grid;
    opacity: 1;
    visibility: visible;
  }
}

/* Full-screen settings layout matching the dashboard style */
.settings-fullscreen {
  position: static;
  height: auto;
  overflow-y: visible;
  background-color: #f3f4f6; /* Light gray background like dashboard */
}

.dark .settings-fullscreen {
  background-color: #111827; /* Dark mode background */
}

/* Style for direct page rendering without extra wrappers */
.settings-direct-page {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 64px; /* Leave space for bottom navigation */
  margin: 0;
  padding: 0;
  max-width: 100%;
  width: 100vw;
  height: calc(100vh - 64px);
  min-height: calc(100% - 64px);
  overflow-y: auto;
}

/* Bottom nav container styling */
.bottom-nav-container {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: var(--z-index-bottom-nav);
  width: 100%;
}

/* Settings with bottom navigation */
.settings-with-nav {
  max-height: calc(100vh - 64px);
  padding-bottom: 64px;
}

/* Override modal-open hiding bottom nav */
.modal-open .bottom-nav {
  display: grid;
}

/* Fix for the grey bar at the bottom of settings page */
.settings-modal-content.settings-direct-page {
  bottom: 0;
  padding-bottom: 64px; 
  height: 100vh;
}

.mobile-settings-content > div:last-child {
  margin-bottom: 70px;
}

.mobile-settings-scrollable {
  padding-bottom: 100px;
}
